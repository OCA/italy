<?xml version="1.0" encoding="UTF-8"?>
<openerp>
<data>

        <record model="ir.ui.view" id="view_message_form_pec">
            <field name="name">mail.message.form.pec</field>
            <field name="model">mail.message</field>
            <field name="inherit_id" ref="mail.view_message_form"/>
            <field name="arch" type="xml">
                <field name="subtype_id" position="after" >
                    <field name="pec_msg_id" />
                    <field name="pec_type" />
                    <field name="ref_msg_id" />
                </field>
                <field name="model" position="before" >
                    <field name="server_id" />
                    <field name="delivery_message_id" />
                    <field name="reception_message_id" />
                </field>
            </field>
        </record>

        <record id="action_mail_pec" model="ir.actions.client">
            <field name="name">PEC</field>
            <field name="tag">mail.wall</field>
            <field name="res_model">mail.message</field>
            <field name="context">{
                'pec_messages': True,
            }</field>
            <field name="params" eval="&quot;{
                'domain': [
                  ('server_id.pec','=',True),
                  ('main_msg_delivery_message_ids','=',False),
                  ('main_msg_reception_message_ids','=',False),
                  ('server_id.user_ids','in',uid),
                ],
                'show_composer': True,
                'is_private':True,
                'show_compact_message': False
            }&quot;"/>
        </record>

        <record id="mail_pec" model="ir.ui.menu">
          <field name="name">PEC</field>
          <field name="action" ref="action_mail_pec"/>
          <field name="parent_id" ref="mail.mail_feeds"/>
          <field name="groups_id" eval="[(4, ref('base.group_pec'))]"/>
        </record>
</data>
</openerp>
